{"version":3,"file":"nhsuk.js","mappings":"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","sources":["../packages/common.js","../packages/components/button/button.js","../packages/components/character-count/character-count.js","../packages/components/checkboxes/checkboxes.js","../packages/components/details/details.js","../packages/components/error-summary/error-summary.js","../packages/components/header/header.js","../packages/components/radios/radios.js","../packages/components/skip-link/skip-link.js","../packages/components/tabs/tabs.js","../packages/index.js","../packages/polyfills.js","../webpack/bootstrap","../packages/nhsuk.js"],"sourcesContent":["/**\n * Toggle a boolean attribute on a HTML element\n *\n * @param {HTMLElement} element\n * @param {string} attr\n */\nconst toggleAttribute = (element, attr) => {\n  // Return without error if element or attr are missing\n  if (!element || !attr) return\n  // Toggle attribute value. Treat no existing attr same as when set to false\n  const value = element.getAttribute(attr) === 'true' ? 'false' : 'true'\n  element.setAttribute(attr, value)\n}\n\n/**\n * Toggle a toggle a class on conditional content for an input based on checked state\n *\n * @param {HTMLElement} input - input element\n * @param {string} className - class to toggle\n */\nconst toggleConditionalInput = (input, className) => {\n  // Return without error if input or class are missing\n  if (!input || !className) return\n  // If the input has conditional content it had a data-aria-controls attribute\n  const conditionalId = input.getAttribute('aria-controls')\n  if (conditionalId) {\n    // Get the conditional element from the input data-aria-controls attribute\n    const conditionalElement = document.getElementById(conditionalId)\n    if (conditionalElement) {\n      if (input.checked) {\n        conditionalElement.classList.remove(className)\n        input.setAttribute('aria-expanded', 'true')\n      } else {\n        conditionalElement.classList.add(className)\n        input.setAttribute('aria-expanded', 'false')\n      }\n    }\n  }\n}\n\n/**\n * Used to generate a unique string, allows multiple instances of the component\n * without them conflicting with each other.\n * https://stackoverflow.com/a/8809472\n *\n * Original code taken from GDS (Government Digital Service)\n * {@link https://github.com/alphagov/govuk-frontend}\n */\nfunction generateUniqueID() {\n  let d = new Date().getTime()\n  if (\n    typeof window.performance !== 'undefined' &&\n    typeof window.performance.now === 'function'\n  ) {\n    d += window.performance.now() // use high-precision timer if available\n  }\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    const r = (d + Math.random() * 16) % 16 | 0\n    d = Math.floor(d / 16)\n    return (c === 'x' ? r : (r & 0x3) | 0x8).toString(16)\n  })\n}\n\n/**\n * Move focus to element\n *\n * Sets tabindex to -1 to make the element programmatically focusable,\n * but removes it on blur as the element doesn't need to be focused again.\n *\n * Original code taken from GDS (Government Digital Service)\n * {@link https://github.com/alphagov/govuk-frontend}\n *\n * @template {HTMLElement} FocusElement\n * @param {FocusElement} $element - HTML element\n * @param {object} [options] - Handler options\n * @param {function(this: FocusElement): void} [options.onBeforeFocus] - Callback before focus\n * @param {function(this: FocusElement): void} [options.onBlur] - Callback on blur\n */\nfunction setFocus($element, options = {}) {\n  const isFocusable = $element.getAttribute('tabindex')\n\n  if (!isFocusable) {\n    $element.setAttribute('tabindex', '-1')\n  }\n\n  /**\n   * Handle element focus\n   */\n  function onFocus() {\n    $element.removeEventListener('focus', onFocus)\n    $element.addEventListener('blur', onBlur)\n  }\n\n  /**\n   * Handle element blur\n   */\n  function onBlur() {\n    $element.removeEventListener('blur', onBlur)\n\n    if (options.onBlur) {\n      options.onBlur.call($element)\n    }\n\n    if (!isFocusable) {\n      $element.removeAttribute('tabindex')\n    }\n  }\n\n  // Add listener to reset element on blur, after focus\n  $element.addEventListener('focus', onFocus)\n\n  // Focus element\n  if (options.onBeforeFocus) {\n    options.onBeforeFocus.call($element)\n  }\n\n  $element.focus()\n}\n\nmodule.exports = {\n  toggleAttribute,\n  toggleConditionalInput,\n  generateUniqueID,\n  setFocus\n}\n","const KEY_SPACE = 32\nconst DEBOUNCE_TIMEOUT_IN_SECONDS = 1\n\nclass Button {\n  constructor($module) {\n    if (!$module) {\n      return this\n    }\n\n    this.$module = $module\n    this.debounceFormSubmitTimer = null\n\n    /**\n     * Initialise an event listener for keydown at document level\n     * this will help listening for later inserted elements with a role=\"button\"\n     */\n    this.$module.addEventListener('keydown', this.handleKeyDown.bind(this))\n    this.$module.addEventListener('click', this.debounce.bind(this))\n  }\n\n  /**\n   * JavaScript 'shim' to trigger the click event of element(s) when the space key is pressed.\n   *\n   * Created since some Assistive Technologies (for example some Screenreaders)\n   * will tell a user to press space on a 'button', so this functionality needs to be shimmed\n   * See https://github.com/alphagov/govuk_elements/pull/272#issuecomment-233028270\n   *\n   * @param {KeyboardEvent} event - Keydown event\n   */\n  handleKeyDown(event) {\n    // get the target element\n\n    const { target } = event\n    // if the element has a role='button' and the pressed key is a space, we'll simulate a click\n    if (\n      target.getAttribute('role') === 'button' &&\n      event.keyCode === KEY_SPACE\n    ) {\n      event.preventDefault()\n      // trigger the target's click event\n      target.click()\n    }\n  }\n\n  /**\n   * If the click quickly succeeds a previous click then nothing will happen.\n   * This stops people accidentally causing multiple form submissions by\n   * double clicking buttons.\n   */\n  debounce(event) {\n    const { target } = event\n    // Check the button that is clicked on has the preventDoubleClick feature enabled\n    if (target.getAttribute('data-prevent-double-click') !== 'true') {\n      return\n    }\n\n    // If the timer is still running then we want to prevent the click from submitting the form\n    if (this.debounceFormSubmitTimer) {\n      event.preventDefault()\n      return false // eslint-disable-line consistent-return\n    }\n\n    this.debounceFormSubmitTimer = setTimeout(() => {\n      this.debounceFormSubmitTimer = null\n    }, DEBOUNCE_TIMEOUT_IN_SECONDS * 1000)\n  }\n}\n\nmodule.exports = ({ scope = document } = {}) => {\n  const buttons = scope.querySelectorAll('[data-module=\"nhsuk-button\"]')\n  buttons.forEach((el) => {\n    new Button(el)\n  })\n}\n","class CharacterCount {\n  constructor($module) {\n    if (!$module) {\n      return this\n    }\n\n    const $textarea = $module.querySelector('.nhsuk-js-character-count')\n    if (!$textarea) {\n      return this\n    }\n\n    this.$module = $module\n    this.$textarea = $textarea\n    this.$visibleCountMessage = null\n    this.$screenReaderCountMessage = null\n    this.lastInputTimestamp = null\n\n    // Check for module\n    const $fallbackLimitMessage = document.getElementById(\n      `${this.$textarea.id}-info`\n    )\n\n    // Move the fallback count message to be immediately after the textarea\n    // Kept for backwards compatibility\n    this.$textarea.insertAdjacentElement('afterend', $fallbackLimitMessage)\n\n    // Create the *screen reader* specific live-updating counter\n    // This doesn't need any styling classes, as it is never visible\n    const $screenReaderCountMessage = document.createElement('div')\n    $screenReaderCountMessage.className =\n      'nhsuk-character-count__sr-status nhsuk-u-visually-hidden'\n    $screenReaderCountMessage.setAttribute('aria-live', 'polite')\n    this.$screenReaderCountMessage = $screenReaderCountMessage\n    $fallbackLimitMessage.insertAdjacentElement(\n      'afterend',\n      $screenReaderCountMessage\n    )\n\n    // Create our live-updating counter element, copying the classes from the\n    // fallback element for backwards compatibility as these may have been configured\n    const $visibleCountMessage = document.createElement('div')\n    $visibleCountMessage.className = $fallbackLimitMessage.className\n    $visibleCountMessage.classList.add('nhsuk-character-count__status')\n    $visibleCountMessage.setAttribute('aria-hidden', 'true')\n    this.$visibleCountMessage = $visibleCountMessage\n    $fallbackLimitMessage.insertAdjacentElement(\n      'afterend',\n      $visibleCountMessage\n    )\n\n    // Hide the fallback limit message\n    $fallbackLimitMessage.classList.add('nhsuk-u-visually-hidden')\n\n    // Read options set using dataset ('data-' values)\n    this.options = CharacterCount.getDataset(this.$module)\n\n    // Determine the limit attribute (characters or words)\n    let countAttribute = this.defaults.characterCountAttribute\n    if (this.options.maxwords) {\n      countAttribute = this.defaults.wordCountAttribute\n    }\n\n    // Save the element limit\n    this.maxLength = this.$module.getAttribute(countAttribute)\n\n    // Check for limit\n    if (!this.maxLength) {\n      return\n    }\n\n    // Remove hard limit if set\n    this.$textarea.removeAttribute('maxlength')\n\n    this.bindChangeEvents()\n\n    // When the page is restored after navigating 'back' in some browsers the\n    // state of the character count is not restored until *after* the DOMContentLoaded\n    // event is fired, so we need to manually update it after the pageshow event\n    // in browsers that support it.\n    if ('onpageshow' in window) {\n      window.addEventListener('pageshow', this.updateCountMessage.bind(this))\n    } else {\n      window.addEventListener(\n        'DOMContentLoaded',\n        this.updateCountMessage.bind(this)\n      )\n    }\n    this.updateCountMessage()\n  }\n\n  // Read data attributes\n  static getDataset(element) {\n    const dataset = {}\n    const { attributes } = element\n    if (attributes) {\n      // eslint-disable-next-line @typescript-eslint/prefer-for-of\n      for (let i = 0; i < attributes.length; i++) {\n        const attribute = attributes[i]\n        const match = attribute.name.match(/^data-(.+)/)\n        if (match) {\n          dataset[match[1]] = attribute.value\n        }\n      }\n    }\n    return dataset\n  }\n\n  // Counts characters or words in text\n  count(text) {\n    let length\n    if (this.options.maxwords) {\n      const tokens = text.match(/\\S+/g) || [] // Matches consecutive non-whitespace chars\n      length = tokens.length // eslint-disable-line prefer-destructuring\n    } else {\n      length = text.length // eslint-disable-line prefer-destructuring\n    }\n    return length\n  }\n\n  // Bind input propertychange to the elements and update based on the change\n  bindChangeEvents() {\n    const { $textarea } = this\n    $textarea.addEventListener('keyup', this.handleKeyUp.bind(this))\n\n    // Bind focus/blur events to start/stop polling\n    $textarea.addEventListener('focus', this.handleFocus.bind(this))\n    $textarea.addEventListener('blur', this.handleBlur.bind(this))\n  }\n\n  // Speech recognition software such as Dragon NaturallySpeaking will modify the\n  // fields by directly changing its `value`. These changes don't trigger events\n  // in JavaScript, so we need to poll to handle when and if they occur.\n  checkIfValueChanged() {\n    if (!this.$textarea.oldValue) {\n      this.$textarea.oldValue = ''\n    }\n    if (this.$textarea.value !== this.$textarea.oldValue) {\n      this.$textarea.oldValue = this.$textarea.value\n      this.updateCountMessage()\n    }\n  }\n\n  // Helper function to update both the visible and screen reader-specific\n  // counters simultaneously (e.g. on init)\n  updateCountMessage() {\n    this.updateVisibleCountMessage()\n    this.updateScreenReaderCountMessage()\n  }\n\n  // Update visible counter\n  updateVisibleCountMessage() {\n    const { $textarea } = this\n    const { $visibleCountMessage } = this\n    const remainingNumber = this.maxLength - this.count($textarea.value)\n\n    // If input is over the threshold, remove the disabled class which renders the\n    // counter invisible.\n    if (this.isOverThreshold()) {\n      $visibleCountMessage.classList.remove(\n        'nhsuk-character-count__message--disabled'\n      )\n    } else {\n      $visibleCountMessage.classList.add(\n        'nhsuk-character-count__message--disabled'\n      )\n    }\n\n    // Update styles\n    if (remainingNumber < 0) {\n      $textarea.classList.add('nhsuk-textarea--error')\n      $visibleCountMessage.classList.remove('nhsuk-hint')\n      $visibleCountMessage.classList.add('nhsuk-error-message')\n    } else {\n      $textarea.classList.remove('nhsuk-textarea--error')\n      $visibleCountMessage.classList.remove('nhsuk-error-message')\n      $visibleCountMessage.classList.add('nhsuk-hint')\n    }\n\n    // Update message\n    $visibleCountMessage.innerHTML = this.formattedUpdateMessage()\n  }\n\n  // Update screen reader-specific counter\n  updateScreenReaderCountMessage() {\n    const { $screenReaderCountMessage } = this\n\n    // If over the threshold, remove the aria-hidden attribute, allowing screen\n    // readers to announce the content of the element.\n    if (this.isOverThreshold()) {\n      $screenReaderCountMessage.removeAttribute('aria-hidden')\n    } else {\n      $screenReaderCountMessage.setAttribute('aria-hidden', true)\n    }\n\n    // Update message\n    $screenReaderCountMessage.innerHTML = this.formattedUpdateMessage()\n  }\n\n  // Format update message\n  formattedUpdateMessage() {\n    const { $textarea } = this\n    const { options } = this\n    const remainingNumber = this.maxLength - this.count($textarea.value)\n\n    let charVerb = 'remaining'\n    let charNoun = 'character'\n    let displayNumber = remainingNumber\n    if (options.maxwords) {\n      charNoun = 'word'\n    }\n    charNoun += remainingNumber === -1 || remainingNumber === 1 ? '' : 's'\n\n    charVerb = remainingNumber < 0 ? 'too many' : 'remaining'\n    displayNumber = Math.abs(remainingNumber)\n\n    return `You have ${displayNumber} ${charNoun} ${charVerb}`\n  }\n\n  // Checks whether the value is over the configured threshold for the input.\n  // If there is no configured threshold, it is set to 0 and this function will\n  // always return true.\n  isOverThreshold() {\n    const { $textarea } = this\n    const { options } = this\n\n    // Determine the remaining number of characters/words\n    const currentLength = this.count($textarea.value)\n    const { maxLength } = this\n\n    // Set threshold if presented in options\n    const thresholdPercent = options.threshold ? options.threshold : 0\n    const thresholdValue = (maxLength * thresholdPercent) / 100\n\n    return thresholdValue <= currentLength\n  }\n\n  // Update the visible character counter and keep track of when the last update\n  // happened for each keypress\n  handleKeyUp() {\n    this.updateVisibleCountMessage()\n    this.lastInputTimestamp = Date.now()\n  }\n\n  handleFocus() {\n    // If the field is focused, and a keyup event hasn't been detected for at\n    // least 1000 ms (1 second), then run the manual change check.\n    // This is so that the update triggered by the manual comparison doesn't\n    // conflict with debounced KeyboardEvent updates.\n    this.valueChecker = setInterval(() => {\n      if (\n        !this.lastInputTimestamp ||\n        Date.now() - 500 >= this.lastInputTimestamp\n      ) {\n        this.checkIfValueChanged()\n      }\n    }, 1000)\n  }\n\n  handleBlur() {\n    // Cancel value checking on blur\n    clearInterval(this.valueChecker)\n  }\n}\n\nCharacterCount.prototype.defaults = {\n  characterCountAttribute: 'data-maxlength',\n  wordCountAttribute: 'data-maxwords'\n}\n\nmodule.exports = ({ scope = document } = {}) => {\n  const characterCounts = scope.querySelectorAll(\n    '[data-module=\"nhsuk-character-count\"]'\n  )\n  characterCounts.forEach((el) => {\n    new CharacterCount(el)\n  })\n}\n","const { toggleConditionalInput } = require('../../common')\n\n/**\n * Conditionally show content when a checkbox button is checked\n * Test at http://localhost:3000/nhsuk-frontend/components/checkboxes/conditional.html\n */\nconst syncAllConditionalReveals = function syncAllConditionalReveals(input) {\n  const allInputsInForm = input.form.querySelectorAll('input[type=\"checkbox\"]')\n  allInputsInForm.forEach((item) =>\n    toggleConditionalInput(item, 'nhsuk-checkboxes__conditional--hidden')\n  )\n}\n\n/**\n * Uncheck other checkboxes\n *\n * Find any other checkbox inputs with the checkbox group value, and uncheck them.\n * This is useful for when a “None of these\" checkbox is checked.\n */\nconst unCheckAllInputsExcept = function unCheckAllInputsExcept(input) {\n  const allInputsInSameExclusiveGroup = input.form.querySelectorAll(\n    `input[type=\"checkbox\"][data-checkbox-exclusive-group=\"${input.getAttribute('data-checkbox-exclusive-group')}\"]`\n  )\n\n  allInputsInSameExclusiveGroup.forEach((inputWithSameName) => {\n    const hasSameFormOwner = input.form === inputWithSameName.form\n    if (hasSameFormOwner && inputWithSameName !== input) {\n      inputWithSameName.checked = false // eslint-disable-line no-param-reassign\n    }\n  })\n\n  syncAllConditionalReveals(input)\n}\n\n/**\n * Uncheck exclusive inputs\n *\n * Find any checkbox inputs with the same checkbox group value and the 'exclusive' behaviour,\n * and uncheck them. This helps prevent someone checking both a regular checkbox and a\n * \"None of these\" checkbox in the same fieldset.\n */\nconst unCheckExclusiveInputs = function unCheckExclusiveInputs(input) {\n  const allExclusiveInputsInSameExclusiveGroup = input.form.querySelectorAll(\n    `input[type=\"checkbox\"][data-checkbox-exclusive][data-checkbox-exclusive-group=\"${input.getAttribute(\n      'data-checkbox-exclusive-group'\n    )}\"]`\n  )\n\n  allExclusiveInputsInSameExclusiveGroup.forEach((exclusiveInput) => {\n    const hasSameFormOwner = input.form === exclusiveInput.form\n    if (hasSameFormOwner) {\n      exclusiveInput.checked = false // eslint-disable-line no-param-reassign\n    }\n  })\n\n  syncAllConditionalReveals(input)\n}\n\nmodule.exports = ({ scope = document } = {}) => {\n  // Checkbox input DOMElements inside a conditional form group\n  const checkboxInputs = scope.querySelectorAll(\n    '.nhsuk-checkboxes .nhsuk-checkboxes__input'\n  )\n\n  /**\n   * Toggle classes and attributes\n   *\n   * @param {MouseEvent} event - Click event\n   */\n  const handleClick = (event) => {\n    // Toggle conditional content based on checked state\n    toggleConditionalInput(\n      event.target,\n      'nhsuk-checkboxes__conditional--hidden'\n    )\n\n    if (!event.target.checked) {\n      return\n    }\n\n    // Handle 'exclusive' checkbox behaviour (ie \"None of these\")\n    if (event.target.hasAttribute('data-checkbox-exclusive')) {\n      unCheckAllInputsExcept(event.target)\n    } else {\n      unCheckExclusiveInputs(event.target)\n    }\n  }\n\n  // When the page is restored after navigating 'back' in some browsers the\n  // state of form controls is not restored until *after* the DOMContentLoaded\n  // event is fired, so we need to sync after the pageshow event in browsers\n  // that support it.\n  if ('onpageshow' in window) {\n    window.addEventListener('pageshow', () =>\n      checkboxInputs.forEach((input) => syncAllConditionalReveals(input))\n    )\n  } else {\n    window.addEventListener('DOMContentLoaded', () =>\n      checkboxInputs.forEach((input) => syncAllConditionalReveals(input))\n    )\n  }\n\n  // Although we've set up handlers to sync state on the pageshow or\n  // DOMContentLoaded event, init could be called after those events have fired,\n  // for example if they are added to the page dynamically, so sync now too.\n  checkboxInputs.forEach((input) => syncAllConditionalReveals(input))\n\n  // Attach handleClick as click to checkboxInputs\n  checkboxInputs.forEach((checkboxButton) => {\n    checkboxButton.addEventListener('change', handleClick)\n  })\n}\n","const { generateUniqueID, toggleAttribute } = require('../../common')\n\n/**\n * Ensure details component is cross browser and accessible\n * Test at http://localhost:3000/nhsuk-frontend/components/details/index.html\n */\n\nmodule.exports = ({ scope = document } = {}) => {\n  // Nodelist of all details elements\n  const allDetails = scope.querySelectorAll('details')\n\n  /**\n   * Adds all necessary functionality to a details element\n   *\n   * @param {HTMLElement} element - details element to initialise\n   */\n  const initDetails = (element) => {\n    // Set details element as polyfilled to prevent duplicate events being added\n    element.setAttribute('nhsuk-polyfilled', 'true')\n\n    // Set content element and give it an ID if it doesn't already have one\n    const content = element.querySelector('.nhsuk-details__text')\n    if (!content.id) {\n      content.setAttribute('id', `details-content-${generateUniqueID()}`)\n    }\n\n    // Set summary element\n    const summary = element.querySelector('.nhsuk-details__summary')\n\n    // Set initial summary aria attributes\n    summary.setAttribute('role', 'button')\n    summary.setAttribute('aria-controls', content.id)\n    summary.setAttribute('tabIndex', '0')\n    const openAttr = element.getAttribute('open') !== null\n    if (openAttr === true) {\n      summary.setAttribute('aria-expanded', 'true')\n      content.setAttribute('aria-hidden', 'false')\n    } else {\n      summary.setAttribute('aria-expanded', 'false')\n      content.setAttribute('aria-hidden', 'true')\n      content.style.display = 'none'\n    }\n\n    const toggleDetails = () => {\n      toggleAttribute(summary, 'aria-expanded')\n      toggleAttribute(content, 'aria-hidden')\n\n      content.style.display =\n        content.getAttribute('aria-hidden') === 'true' ? 'none' : ''\n      if (element.hasAttribute('open')) {\n        element.removeAttribute('open')\n      } else {\n        element.setAttribute('open', 'open')\n      }\n    }\n\n    // Toggle details onclick\n    summary.addEventListener('click', toggleDetails)\n\n    // Call toggle details on enter and space key events\n    summary.addEventListener('keydown', (event) => {\n      if (event.keyCode === 13 || event.keyCode === 32) {\n        event.preventDefault()\n        summary.click()\n      }\n    })\n  }\n\n  allDetails.forEach((element) => {\n    // If there is native details support, we want to avoid running code to polyfill native behaviour.\n    const hasNativeDetails =\n      'HTMLDetailsElement' in window && element instanceof HTMLDetailsElement\n\n    if (!hasNativeDetails && !element.hasAttribute('nhsuk-polyfilled')) {\n      initDetails(element)\n    }\n  })\n}\n","/**\n * Adapted from https://github.com/alphagov/govuk-frontend/blob/v2.13.0/src/components/error-summary/error-summary.js\n */\n\n/**\n * Get associated legend or label\n *\n * Returns the first element that exists from this list:\n *\n * - The `<legend>` associated with the closest `<fieldset>` ancestor, as long\n *   as the top of it is no more than half a viewport height away from the\n *   bottom of the input\n * - The first `<label>` that is associated with the input using for='inputId'\n * - The closest parent `<label>`\n */\nfunction getAssociatedLegendOrLabel(input) {\n  const fieldset = input.closest('fieldset')\n\n  if (fieldset) {\n    const legends = fieldset.getElementsByTagName('legend')\n\n    if (legends.length) {\n      const candidateLegend = legends[0] // eslint-disable-line prefer-destructuring\n\n      // If the input type is radio or checkbox, always use the legend if there\n      // is one.\n      if (input.type === 'checkbox' || input.type === 'radio') {\n        return candidateLegend\n      }\n\n      // For other input types, only scroll to the fieldset’s legend (instead of\n      // the label associated with the input) if the input would end up in the\n      // top half of the screen.\n      //\n      // This should avoid situations where the input either ends up off the\n      // screen, or obscured by a software keyboard.\n      const legendTop = candidateLegend.getBoundingClientRect().top\n      const inputRect = input.getBoundingClientRect()\n\n      // If the browser doesn't support Element.getBoundingClientRect().height\n      // or window.innerHeight (like IE8), bail and just link to the label.\n      if (inputRect.height && window.innerHeight) {\n        const inputBottom = inputRect.top + inputRect.height\n\n        if (inputBottom - legendTop < window.innerHeight / 2) {\n          return candidateLegend\n        }\n      }\n    }\n  }\n\n  return (\n    document.querySelector(`label[for='${input.getAttribute('id')}']`) ||\n    input.closest('label')\n  )\n}\n\n/**\n * Focus the target element\n *\n * By default, the browser will scroll the target into view. Because our labels\n * or legends appear above the input, this means the user will be presented with\n * an input without any context, as the label or legend will be off the top of\n * the screen.\n *\n * Manually handling the click event, scrolling the question into view and then\n * focussing the element solves this.\n *\n * This also results in the label and/or legend being announced correctly in\n * NVDA - without this only the field type is announced\n * (e.g. 'Edit, has autocomplete').\n */\nfunction focusTarget(target) {\n  // If the element that was clicked was not a link, return early\n  if (target.tagName !== 'A' || target.href === false) {\n    return false\n  }\n\n  const input = document.querySelector(target.hash)\n  if (!input) {\n    return false\n  }\n\n  const legendOrLabel = getAssociatedLegendOrLabel(input)\n  if (!legendOrLabel) {\n    return false\n  }\n\n  // Scroll the legend or label into view *before* calling focus on the input to\n  // avoid extra scrolling in browsers that don't support `preventScroll` (which\n  // at time of writing is most of them...)\n  legendOrLabel.scrollIntoView()\n  input.focus({ preventScroll: true })\n\n  return true\n}\n\n/**\n * Handle click events on the error summary\n */\nfunction handleClick(event) {\n  if (focusTarget(event.target)) {\n    event.preventDefault()\n  }\n}\n\nmodule.exports = ({ focusOnPageLoad = true, scope = document } = {}) => {\n  // Error summary component\n  const errorSummary = scope.querySelector('.nhsuk-error-summary')\n\n  if (errorSummary) {\n    // Focus error summary component if it exists\n\n    if (focusOnPageLoad) {\n      errorSummary.focus()\n    }\n    errorSummary.addEventListener('click', handleClick)\n  }\n}\n","/**\n * Header component\n *\n */\n\nclass Header {\n  constructor($module) {\n    if (!$module) {\n      return this\n    }\n\n    this.$module = $module\n\n    this.navigationList = this.$module.querySelector(\n      '.nhsuk-header__navigation-list'\n    )\n    this.navigationItems = this.$module.querySelectorAll(\n      '.nhsuk-header__navigation-item'\n    )\n\n    this.mobileMenuToggleButton = this.$module.querySelector(\n      '.nhsuk-header__menu-toggle'\n    )\n    this.mobileMenuContainer = this.$module.querySelector(\n      '.nhsuk-mobile-menu-container'\n    )\n\n    if (\n      !this.navigationList ||\n      !this.navigationItems ||\n      !this.navigationItems.length ||\n      !this.mobileMenuToggleButton ||\n      !this.mobileMenuContainer\n    ) {\n      return this\n    }\n\n    this.mobileMenu = document.createElement('ul')\n    this.menuIsEnabled = false\n    this.menuIsOpen = false\n\n    this.handleEscapeKey = this.onEscapeKey.bind(this)\n    this.handleUpdateNavigation = this.debounce(this.updateNavigation)\n    this.handleToggleMobileMenu = this.toggleMobileMenu.bind(this)\n\n    this.setupNavigation()\n    this.updateNavigation()\n  }\n\n  debounce(func, timeout = 100) {\n    let timer\n    return (...args) => {\n      clearTimeout(timer)\n      timer = setTimeout(() => {\n        func.apply(this, args)\n      }, timeout)\n    }\n  }\n\n  /**\n   * Reset navigation\n   *\n   * Calculate available space by summing the width of each navigation item\n   */\n  resetNavigation() {\n    let right = 0\n\n    // Reset and calculate widths on every resize\n    this.breakpoints.forEach((breakpoint) => {\n      this.navigationList.insertBefore(\n        breakpoint.element,\n        this.mobileMenuContainer\n      )\n\n      // Calculate widths\n      right += breakpoint.element.offsetWidth\n      breakpoint.right = right\n    })\n\n    // Reset space for menu button\n    this.width = this.navigationList.offsetWidth\n  }\n\n  /**\n   * Add the breakpoints with default positions\n   */\n  setupNavigation() {\n    this.breakpoints = []\n\n    this.navigationItems.forEach((element) => {\n      this.breakpoints.push({ element, right: 0 })\n    })\n\n    // Add resize listener for next update\n    window.addEventListener('resize', this.handleUpdateNavigation)\n  }\n\n  /**\n   * Add the mobile menu to the DOM\n   */\n  setupMobileMenu() {\n    if (this.mobileMenu.parentElement) {\n      return\n    }\n\n    this.mobileMenuContainer.appendChild(this.mobileMenu)\n    this.mobileMenu.classList.add(\n      'nhsuk-header__drop-down',\n      'nhsuk-header__drop-down--hidden'\n    )\n  }\n\n  /**\n   * Enable the mobile menu\n   */\n  enableMobileMenu() {\n    if (this.menuIsEnabled) {\n      return\n    }\n\n    this.menuIsEnabled = true\n\n    this.mobileMenuToggleButton.classList.add(\n      'nhsuk-header__menu-toggle--visible'\n    )\n\n    this.mobileMenuContainer.classList.add(\n      'nhsuk-mobile-menu-container--visible'\n    )\n\n    // Add click listener to toggle menu\n    this.mobileMenuToggleButton.addEventListener(\n      'click',\n      this.handleToggleMobileMenu\n    )\n  }\n\n  /**\n   * Disable the mobile menu\n   */\n  disableMobileMenu() {\n    if (!this.menuIsEnabled) {\n      return\n    }\n\n    this.closeMobileMenu()\n    this.menuIsEnabled = false\n\n    this.mobileMenuToggleButton.classList.remove(\n      'nhsuk-header__menu-toggle--visible'\n    )\n\n    this.mobileMenuContainer.classList.remove(\n      'nhsuk-mobile-menu-container--visible'\n    )\n\n    // Remove click listener to toggle menu\n    this.mobileMenuToggleButton.removeEventListener(\n      'click',\n      this.handleToggleMobileMenu\n    )\n  }\n\n  /**\n   * Close the mobile menu\n   *\n   * Closes the mobile menu and updates accessibility state.\n   *\n   * Removes the margin-bottom from the navigation\n   */\n  closeMobileMenu() {\n    if (!this.menuIsEnabled || !this.menuIsOpen) {\n      return\n    }\n\n    this.menuIsOpen = false\n    this.mobileMenu.classList.add('nhsuk-header__drop-down--hidden')\n    this.$module.style.marginBottom = 0\n    this.mobileMenuToggleButton.setAttribute('aria-expanded', 'false')\n\n    // Remove escape key listener to close menu\n    document.removeEventListener('keydown', this.handleEscapeKey)\n  }\n\n  /**\n   * Escape key handler\n   *\n   * This function is called when the user\n   * presses the escape key to close the mobile menu.\n   *\n   * @param {KeyboardEvent} event - Key press event\n   */\n  onEscapeKey(event) {\n    if (event.key === 'Escape') {\n      this.closeMobileMenu()\n    }\n  }\n\n  /**\n   * Open the mobile menu\n   *\n   * Opens the mobile menu and updates accessibility state.\n   *\n   * The mobile menu is absolutely positioned, so it adds a margin\n   * to the bottom of the navigation to prevent it from overlapping\n   *\n   * Adds event listeners for the close button,\n   */\n  openMobileMenu() {\n    if (!this.menuIsEnabled || this.menuIsOpen) {\n      return\n    }\n\n    this.menuIsOpen = true\n    this.mobileMenu.classList.remove('nhsuk-header__drop-down--hidden')\n    const marginBody = this.mobileMenu.offsetHeight\n    this.$module.style.marginBottom = `${marginBody}px`\n    this.mobileMenuToggleButton.setAttribute('aria-expanded', 'true')\n\n    // Add escape key listener to close menu\n    document.addEventListener('keydown', this.handleEscapeKey)\n  }\n\n  /**\n   * Handle menu button click\n   *\n   * Toggles the mobile menu between open and closed\n   */\n  toggleMobileMenu() {\n    if (!this.menuIsEnabled) {\n      return\n    }\n\n    if (this.menuIsOpen) {\n      this.closeMobileMenu()\n    } else {\n      this.openMobileMenu()\n    }\n  }\n\n  /**\n   * Update navigation for the available space\n   *\n   * Moves all items that overflow the available space into the mobile menu\n   */\n  updateNavigation() {\n    this.resetNavigation()\n\n    // Check for items that overflow\n    let menuItems = this.breakpoints.filter((breakpoint) => {\n      return breakpoint.right > this.width\n    })\n\n    // Disable mobile menu if empty\n    if (!menuItems.length) {\n      this.disableMobileMenu()\n      return\n    }\n\n    this.setupMobileMenu()\n    this.enableMobileMenu()\n\n    // Subtract space for menu button\n    this.width -= this.mobileMenuContainer.offsetWidth\n\n    // Move items based on available width\n    this.breakpoints.forEach((breakpoint) => {\n      if (breakpoint.right > this.width) {\n        this.mobileMenu.insertAdjacentElement('beforeend', breakpoint.element)\n      }\n    })\n  }\n}\n\nmodule.exports = (options = {}) => {\n  const $scope = options.scope || document\n  const $module = $scope.querySelector('.nhsuk-navigation')\n\n  new Header($module)\n}\n","const { toggleConditionalInput } = require('../../common')\n\n/**\n * Conditionally show content when a radio button is checked\n * Test at http://localhost:3000/nhsuk-frontend/components/radios/conditional.html\n */\n\nmodule.exports = ({ scope = document } = {}) => {\n  // Radio input HTMLElements inside a conditional form group\n  const radioInputs = scope.querySelectorAll(\n    '.nhsuk-radios--conditional .nhsuk-radios__input'\n  )\n\n  /**\n   * Update all conditional reveals to match checked state\n   */\n  const syncAllConditionalReveals = () => {\n    radioInputs.forEach((input) =>\n      toggleConditionalInput(input, 'nhsuk-radios__conditional--hidden')\n    )\n  }\n\n  // When the page is restored after navigating 'back' in some browsers the\n  // state of form controls is not restored until *after* the DOMContentLoaded\n  // event is fired, so we need to sync after the pageshow event in browsers\n  // that support it.\n  if ('onpageshow' in window) {\n    window.addEventListener('pageshow', syncAllConditionalReveals)\n  } else {\n    window.addEventListener('DOMContentLoaded', syncAllConditionalReveals)\n  }\n\n  // Although we've set up handlers to sync state on the pageshow or\n  // DOMContentLoaded event, init could be called after those events have fired,\n  // for example if they are added to the page dynamically, so sync now too.\n  syncAllConditionalReveals()\n\n  // Attach event handler to radioInputs\n  radioInputs.forEach((radioButton) => {\n    radioButton.addEventListener('change', syncAllConditionalReveals)\n  })\n}\n","const { setFocus } = require('../../common')\n\n/*\n * NHS.UK skip link.\n *\n * When using VoiceOver on iOS, focus remains on the skip link anchor\n * when elected so the next focusable element is not at the jumped to area.\n */\n\nmodule.exports = (options = {}) => {\n  const $scope = options.scope || document\n  const $module = $scope.querySelector('.nhsuk-skip-link')\n\n  // Check for skip link\n  if (!$module || !($module instanceof HTMLAnchorElement)) {\n    return\n  }\n\n  const linkedElementId = $module.hash.split('#').pop()\n  const $linkedElement = linkedElementId\n    ? document.getElementById(linkedElementId)\n    : null\n\n  // Check for linked element\n  if (!$linkedElement) {\n    return\n  }\n\n  /**\n   * Focus the linked element on click\n   *\n   * Adds a helper CSS class to hide native focus styles,\n   * but removes it on blur to restore native focus styles\n   */\n  $module.addEventListener('click', () =>\n    setFocus($linkedElement, {\n      onBeforeFocus() {\n        $linkedElement.classList.add('nhsuk-skip-link-focused-element')\n      },\n      onBlur() {\n        $linkedElement.classList.remove('nhsuk-skip-link-focused-element')\n      }\n    })\n  )\n}\n","class Tabs {\n  constructor($module) {\n    this.$module = $module\n    this.$tabs = $module.querySelectorAll('.nhsuk-tabs__tab')\n\n    this.keys = {\n      down: 40,\n      left: 37,\n      right: 39,\n      up: 38\n    }\n    this.jsHiddenClass = 'nhsuk-tabs__panel--hidden'\n\n    this.showEvent = new CustomEvent('tab.show')\n    this.hideEvent = new CustomEvent('tab.hide')\n\n    if (typeof window.matchMedia === 'function') {\n      this.setupResponsiveChecks()\n    } else {\n      this.setup()\n    }\n  }\n\n  setupResponsiveChecks() {\n    // $nhsuk-breakpoints: (\n    // mobile: 320px,\n    // tablet: 641px,\n    // desktop: 769px,\n    // large-desktop: 990px\n    // );\n    this.mql = window.matchMedia('(min-width: 641px)')\n\n    // MediaQueryList.addEventListener isn't supported by Safari < 14 so we need\n    // to be able to fall back to the deprecated MediaQueryList.addListener\n    if ('addEventListener' in this.mql) {\n      this.mql.addEventListener('change', this.checkMode.bind(this))\n    } else {\n      // addListener is a deprecated function, however addEventListener\n      // isn't supported by Safari < 14. We therefore add this in as\n      // a fallback for those browsers\n      this.mql.addListener(this.checkMode.bind(this))\n    }\n\n    this.checkMode()\n  }\n\n  checkMode() {\n    if (this.mql.matches) {\n      this.setup()\n    } else {\n      this.teardown()\n    }\n  }\n\n  setup() {\n    const { $module } = this\n    const { $tabs } = this\n    const $tabList = $module.querySelector('.nhsuk-tabs__list')\n    const $tabListItems = $module.querySelectorAll('.nhsuk-tabs__list-item')\n\n    if (!$tabs || !$tabList || !$tabListItems) {\n      return\n    }\n\n    $tabList.setAttribute('role', 'tablist')\n\n    $tabListItems.forEach(($item) => {\n      $item.setAttribute('role', 'presentation')\n    })\n\n    $tabs.forEach(($tab) => {\n      // Set HTML attributes\n      this.setAttributes($tab)\n\n      // Save bounded functions to use when removing event listeners during teardown\n      // eslint-disable-next-line no-param-reassign\n      $tab.boundTabClick = this.onTabClick.bind(this)\n      // eslint-disable-next-line no-param-reassign\n      $tab.boundTabKeydown = this.onTabKeydown.bind(this)\n\n      // Handle events\n      $tab.addEventListener('click', $tab.boundTabClick, true)\n      $tab.addEventListener('keydown', $tab.boundTabKeydown, true)\n\n      // Remove old active panels\n      this.hideTab($tab)\n    })\n\n    // Show either the active tab according to the URL's hash or the first tab\n    const $activeTab = this.getTab(window.location.hash) || this.$tabs[0]\n    this.showTab($activeTab)\n\n    // Handle hashchange events\n    $module.boundOnHashChange = this.onHashChange.bind(this)\n    window.addEventListener('hashchange', $module.boundOnHashChange, true)\n  }\n\n  teardown() {\n    const { $module } = this\n    const { $tabs } = this\n    const $tabList = $module.querySelector('.nhsuk-tabs__list')\n    const $tabListItems = $module.querySelectorAll('.nhsuk-tabs__list-item')\n\n    if (!$tabs || !$tabList || !$tabListItems) {\n      return\n    }\n\n    $tabList.removeAttribute('role')\n\n    $tabListItems.forEach(($item) => {\n      $item.removeAttribute('role', 'presentation')\n    })\n\n    $tabs.forEach(($tab) => {\n      // Remove events\n      $tab.removeEventListener('click', $tab.boundTabClick, true)\n      $tab.removeEventListener('keydown', $tab.boundTabKeydown, true)\n\n      // Unset HTML attributes\n      this.unsetAttributes($tab)\n    })\n\n    // Remove hashchange event handler\n    window.removeEventListener('hashchange', $module.boundOnHashChange, true)\n  }\n\n  onHashChange() {\n    const { hash } = window.location\n    const $tabWithHash = this.getTab(hash)\n    if (!$tabWithHash) {\n      return\n    }\n\n    // Prevent changing the hash\n    if (this.changingHash) {\n      this.changingHash = false\n      return\n    }\n\n    // Show either the active tab according to the URL's hash or the first tab\n    const $previousTab = this.getCurrentTab()\n\n    this.hideTab($previousTab)\n    this.showTab($tabWithHash)\n    $tabWithHash.focus()\n  }\n\n  hideTab($tab) {\n    this.unhighlightTab($tab)\n    this.hidePanel($tab)\n  }\n\n  showTab($tab) {\n    this.highlightTab($tab)\n    this.showPanel($tab)\n  }\n\n  getTab(hash) {\n    return this.$module.querySelector(`.nhsuk-tabs__tab[href=\"${hash}\"]`)\n  }\n\n  setAttributes($tab) {\n    // set tab attributes\n    const panelId = Tabs.getHref($tab).slice(1)\n    $tab.setAttribute('id', `tab_${panelId}`)\n    $tab.setAttribute('role', 'tab')\n    $tab.setAttribute('aria-controls', panelId)\n    $tab.setAttribute('aria-selected', 'false')\n    $tab.setAttribute('tabindex', '-1')\n\n    // set panel attributes\n    const $panel = this.getPanel($tab)\n    $panel.setAttribute('role', 'tabpanel')\n    $panel.setAttribute('aria-labelledby', $tab.id)\n    $panel.classList.add(this.jsHiddenClass)\n  }\n\n  unsetAttributes($tab) {\n    // unset tab attributes\n    $tab.removeAttribute('id')\n    $tab.removeAttribute('role')\n    $tab.removeAttribute('aria-controls')\n    $tab.removeAttribute('aria-selected')\n    $tab.removeAttribute('tabindex')\n\n    // unset panel attributes\n    const $panel = this.getPanel($tab)\n    $panel.removeAttribute('role')\n    $panel.removeAttribute('aria-labelledby')\n    $panel.removeAttribute('tabindex')\n    $panel.classList.remove(this.jsHiddenClass)\n  }\n\n  onTabClick(e) {\n    if (!e.target.classList.contains('nhsuk-tabs__tab')) {\n      e.stopPropagation()\n      e.preventDefault()\n    }\n    e.preventDefault()\n    const $newTab = e.target\n    const $currentTab = this.getCurrentTab()\n    this.hideTab($currentTab)\n    this.showTab($newTab)\n    this.createHistoryEntry($newTab)\n  }\n\n  createHistoryEntry($tab) {\n    const $panel = this.getPanel($tab)\n\n    // Save and restore the id\n    // so the page doesn't jump when a user clicks a tab (which changes the hash)\n    const { id } = $panel\n    $panel.id = ''\n    this.changingHash = true\n    window.location.hash = Tabs.getHref($tab).slice(1)\n    $panel.id = id\n  }\n\n  onTabKeydown(e) {\n    switch (e.keyCode) {\n      case this.keys.left:\n      case this.keys.up:\n        this.activatePreviousTab()\n        e.preventDefault()\n        break\n      case this.keys.right:\n      case this.keys.down:\n        this.activateNextTab()\n        e.preventDefault()\n        break\n\n      default:\n    }\n  }\n\n  activateNextTab() {\n    const currentTab = this.getCurrentTab()\n    const nextTabListItem = currentTab.parentNode.nextElementSibling\n    let nextTab\n\n    if (nextTabListItem) {\n      nextTab = nextTabListItem.querySelector('.nhsuk-tabs__tab')\n    }\n    if (nextTab) {\n      this.hideTab(currentTab)\n      this.showTab(nextTab)\n      nextTab.focus()\n      this.createHistoryEntry(nextTab)\n    }\n  }\n\n  activatePreviousTab() {\n    const currentTab = this.getCurrentTab()\n    const previousTabListItem = currentTab.parentNode.previousElementSibling\n    let previousTab\n\n    if (previousTabListItem) {\n      previousTab = previousTabListItem.querySelector('.nhsuk-tabs__tab')\n    }\n    if (previousTab) {\n      this.hideTab(currentTab)\n      this.showTab(previousTab)\n      previousTab.focus()\n      this.createHistoryEntry(previousTab)\n    }\n  }\n\n  getPanel($tab) {\n    const $panel = this.$module.querySelector(Tabs.getHref($tab))\n    return $panel\n  }\n\n  showPanel($tab) {\n    const $panel = this.getPanel($tab)\n    $panel.classList.remove(this.jsHiddenClass)\n    $panel.dispatchEvent(this.showEvent)\n  }\n\n  hidePanel(tab) {\n    const $panel = this.getPanel(tab)\n    $panel.classList.add(this.jsHiddenClass)\n    $panel.dispatchEvent(this.hideEvent)\n  }\n\n  unhighlightTab($tab) {\n    $tab.setAttribute('aria-selected', 'false')\n    $tab.parentNode.classList.remove('nhsuk-tabs__list-item--selected')\n    $tab.setAttribute('tabindex', '-1')\n  }\n\n  highlightTab($tab) {\n    $tab.setAttribute('aria-selected', 'true')\n    $tab.parentNode.classList.add('nhsuk-tabs__list-item--selected')\n    $tab.setAttribute('tabindex', '0')\n  }\n\n  getCurrentTab() {\n    return this.$module.querySelector(\n      '.nhsuk-tabs__list-item--selected .nhsuk-tabs__tab'\n    )\n  }\n\n  // this is because IE doesn't always return the actual value but a relative full path\n  // should be a utility function most prob\n  // http://labs.thesedays.com/blog/2010/01/08/getting-the-href-value-with-jquery-in-ie/\n  static getHref($tab) {\n    const href = $tab.getAttribute('href')\n    const hash = href.slice(href.indexOf('#'), href.length)\n    return hash\n  }\n}\n\n/**\n * Initialise tabs component\n */\nmodule.exports = ({ scope = document } = {}) => {\n  const tabs = scope.querySelectorAll('[data-module=\"nhsuk-tabs\"]')\n  tabs.forEach((el) => {\n    new Tabs(el)\n  })\n}\n","/* eslint-disable import/prefer-default-export */\n\n// Components\nconst initButton = require('./components/button/button')\nconst initCharacterCount = require('./components/character-count/character-count')\nconst initCheckboxes = require('./components/checkboxes/checkboxes')\nconst initDetails = require('./components/details/details')\nconst initErrorSummary = require('./components/error-summary/error-summary')\nconst initHeader = require('./components/header/header')\nconst initRadios = require('./components/radios/radios')\nconst initSkipLink = require('./components/skip-link/skip-link')\nconst initTabs = require('./components/tabs/tabs')\n\nrequire('./polyfills.js')\n\n/**\n * Use this function to initialise nhsuk-frontend components within a\n * given scope. This function is called by default with the document\n * element, but you can call it again later with a new DOM element\n * containing nhsuk-frontend components which you wish to initialise.\n *\n * @param {HTMLElement} scope\n */\nfunction initAll(scope) {\n  initHeader({ scope })\n  initSkipLink({ scope })\n  initButton({ scope })\n  initCharacterCount({ scope })\n  initCheckboxes({ scope })\n  initDetails({ scope })\n  initErrorSummary({ scope })\n  initRadios({ scope })\n  initTabs({ scope })\n}\n\nmodule.exports = {\n  initButton,\n  initCharacterCount,\n  initCheckboxes,\n  initDetails,\n  initErrorSummary,\n  initHeader,\n  initRadios,\n  initSkipLink,\n  initTabs,\n  initAll\n}\n","/**\n * IE polyfill for NodeList.forEach()\n */\nif (!NodeList.prototype.forEach) {\n  NodeList.prototype.forEach = Array.prototype.forEach\n}\n\n/**\n * IE polyfill for Array.includes()\n */\nif (!Array.prototype.includes) {\n  // eslint-disable-next-line no-extend-native\n  Object.defineProperty(Array.prototype, 'includes', {\n    enumerable: false,\n    value(obj) {\n      return this.filter((el) => el === obj).length > 0\n    }\n  })\n}\n\n/**\n * IE polyfill for Element.closest()\n */\nif (!Element.prototype.matches) {\n  Element.prototype.matches =\n    Element.prototype.msMatchesSelector ||\n    Element.prototype.webkitMatchesSelector\n}\n\nif (!Element.prototype.closest) {\n  Element.prototype.closest = function (s) {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    var el = this\n\n    do {\n      if (Element.prototype.matches.call(el, s)) return el\n      el = el.parentElement || el.parentNode\n    } while (el !== null && el.nodeType === 1)\n    return null\n  }\n}\n\n/**\n * IE polyfill for CustomEvent\n */\nif (typeof window.CustomEvent !== 'function') {\n  window.CustomEvent = function (event, params) {\n    params = params || { bubbles: false, cancelable: false, detail: null }\n    var evt = document.createEvent('CustomEvent')\n    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail)\n    return evt\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const { initAll } = require('.')\n\n// Initialise components\ndocument.addEventListener('DOMContentLoaded', () => initAll(document))\n"],"names":["toggleAttribute","element","attr","value","getAttribute","setAttribute","toggleConditionalInput","input","className","conditionalId","conditionalElement","document","getElementById","checked","classList","remove","add","generateUniqueID","d","Date","getTime","window","performance","now","replace","c","r","Math","random","floor","toString","setFocus","$element","options","isFocusable","onFocus","removeEventListener","addEventListener","onBlur","call","removeAttribute","onBeforeFocus","focus","module","exports","KEY_SPACE","DEBOUNCE_TIMEOUT_IN_SECONDS","Button","$module","debounceFormSubmitTimer","handleKeyDown","bind","debounce","_proto","prototype","event","target","keyCode","preventDefault","click","_this","setTimeout","_temp","_ref","_ref$scope","scope","buttons","querySelectorAll","forEach","el","CharacterCount","$textarea","querySelector","$visibleCountMessage","$screenReaderCountMessage","lastInputTimestamp","$fallbackLimitMessage","id","insertAdjacentElement","createElement","getDataset","countAttribute","defaults","characterCountAttribute","maxwords","wordCountAttribute","maxLength","bindChangeEvents","updateCountMessage","dataset","attributes","i","length","attribute","match","name","count","text","tokens","handleKeyUp","handleFocus","handleBlur","checkIfValueChanged","oldValue","updateVisibleCountMessage","updateScreenReaderCountMessage","remainingNumber","isOverThreshold","innerHTML","formattedUpdateMessage","charVerb","charNoun","displayNumber","abs","currentLength","thresholdPercent","threshold","thresholdValue","valueChecker","setInterval","clearInterval","characterCounts","_require","require","syncAllConditionalReveals","allInputsInForm","form","item","unCheckAllInputsExcept","allInputsInSameExclusiveGroup","inputWithSameName","hasSameFormOwner","unCheckExclusiveInputs","allExclusiveInputsInSameExclusiveGroup","exclusiveInput","checkboxInputs","handleClick","hasAttribute","checkboxButton","allDetails","initDetails","content","summary","openAttr","style","display","toggleDetails","hasNativeDetails","HTMLDetailsElement","getAssociatedLegendOrLabel","fieldset","closest","legends","getElementsByTagName","candidateLegend","type","legendTop","getBoundingClientRect","top","inputRect","height","innerHeight","inputBottom","focusTarget","tagName","href","hash","legendOrLabel","scrollIntoView","preventScroll","_ref$focusOnPageLoad","focusOnPageLoad","errorSummary","Header","navigationList","navigationItems","mobileMenuToggleButton","mobileMenuContainer","mobileMenu","menuIsEnabled","menuIsOpen","handleEscapeKey","onEscapeKey","handleUpdateNavigation","updateNavigation","handleToggleMobileMenu","toggleMobileMenu","setupNavigation","func","timeout","timer","_len","arguments","args","Array","_key","clearTimeout","apply","resetNavigation","_this2","right","breakpoints","breakpoint","insertBefore","offsetWidth","width","_this3","push","setupMobileMenu","parentElement","appendChild","enableMobileMenu","disableMobileMenu","closeMobileMenu","marginBottom","key","openMobileMenu","marginBody","offsetHeight","_this4","menuItems","filter","$scope","radioInputs","radioButton","HTMLAnchorElement","linkedElementId","split","pop","$linkedElement","Tabs","$tabs","keys","down","left","up","jsHiddenClass","showEvent","CustomEvent","hideEvent","matchMedia","setupResponsiveChecks","setup","mql","checkMode","addListener","matches","teardown","$tabList","$tabListItems","$item","$tab","setAttributes","boundTabClick","onTabClick","boundTabKeydown","onTabKeydown","hideTab","$activeTab","getTab","location","showTab","boundOnHashChange","onHashChange","unsetAttributes","$tabWithHash","changingHash","$previousTab","getCurrentTab","unhighlightTab","hidePanel","highlightTab","showPanel","panelId","getHref","slice","$panel","getPanel","e","contains","stopPropagation","$newTab","$currentTab","createHistoryEntry","activatePreviousTab","activateNextTab","currentTab","nextTabListItem","parentNode","nextElementSibling","nextTab","previousTabListItem","previousElementSibling","previousTab","dispatchEvent","tab","indexOf","tabs","initButton","initCharacterCount","initCheckboxes","initErrorSummary","initHeader","initRadios","initSkipLink","initTabs","initAll","NodeList","includes","Object","defineProperty","enumerable","obj","Element","msMatchesSelector","webkitMatchesSelector","s","nodeType","params","bubbles","cancelable","detail","evt","createEvent","initCustomEvent"],"sourceRoot":""}